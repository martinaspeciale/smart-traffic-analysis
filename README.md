# Smart Traffic Analysis — Multi-City ETL Pipeline

**Smart Traffic Analysis** is an ETL pipeline for analyzing urban traffic data across multiple cities.

- Supports both real and synthetic datasets  
- Modular and extensible ETL architecture  
- SQLite database storage for unified querying  
- Ready for integration with data visualization tools (e.g., dashboards)

The project was designed for educational and demonstration purposes and can easily be extended to handle live data feeds or larger traffic datasets.

## How to use the ETL pipeline

### 1️⃣ Generate synthetic datasets (optional)

Run the following command to generate synthetic datasets for Madrid, Barcellona, Londra, Roma, Milano fake, Parigi:

```bash
python scripts/generate_synthetic_data.py
```

### 2️⃣ Run the ETL pipeline

Run the following command:

```bash
python run_etl.py
```

You will be prompted to select the dataset (real or synthetic) to process.

### 3️⃣ Processed data

The processed data will be saved in the folder:

```
data/processed/
```

with the name:

```
cleaned_<city>.csv
```

### 4️⃣ Database

The processed data is also loaded into the SQLite database located at:

```
database/traffic.db
```

## Example SQL query

After running the ETL pipeline for multiple cities, you can open the SQLite database and run queries like:

```sql
SELECT city_name, COUNT(*) FROM traffic_data GROUP BY city_name;
```

## Project structure
```
- `data/`
    - `raw/`
        - `real/` → contains real datasets (e.g. Milano)
        - `synthetic/` → contains synthetic datasets (Madrid, Barcellona, Londra, Roma, Milano fake, Parigi)
    - `processed/` → processed CSV files generated by the ETL pipeline
- `database/`
    - `traffic.db` → SQLite database storing traffic data
- `etl/`
    - `extract.py` → Extract step of the pipeline
    - `transform.py` → Transform step of the pipeline
    - `load.py` → Load step of the pipeline
- `scripts/`
    - `generate_synthetic_data.py` → script to generate synthetic datasets
- `run_etl.py` → main script to run the full ETL pipeline
- `requirements.txt` → required Python packages
- `README.md` → project documentation
```

## Example visualization

Example Python code to visualize the average vehicle count per city:

```python
import sqlite3
import pandas as pd
import matplotlib.pyplot as plt

conn = sqlite3.connect("database/traffic.db")
df = pd.read_sql_query("SELECT * FROM traffic_data", conn)
conn.close()

df.groupby('city_name')['vehicle_count'].mean().plot(kind='bar')
plt.title("Average vehicle count per city")
plt.ylabel("Average vehicle count")
plt.show()
```

## Future improvements

- Add support for real-time traffic data via API
- Add more real-world datasets
- Build an interactive dashboard for multi-city traffic analysis
